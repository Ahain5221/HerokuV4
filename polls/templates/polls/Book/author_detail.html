{% extends "base_generic.html" %}

{% block content %}

    <h1>Author: {{ author }} </h1>
    <p>{{ author.date_of_birth }} - {% if author.date_of_death %}{{ author.date_of_death }}{% endif %}</p>

    <div style="margin-left:20px;margin-top:20px">
        <h4>Books</h4>

        <ul class="list-inline">
            {% for book in author.book_set.all %}
                <li><a href="{% url 'book-detail' book.pk %}">{{ book }}</a>
                </li>
            {% endfor %}
        </ul>

    </div>

    {% if author.added_by == user and not author.Verified or user.is_superuser %}
        <a href="{% url 'author-update' pk=author.id %}">
            <button class="btn btn-success btn-sm">UPDATE</button>
        </a>
    {% endif %}
    <br>
    {% if user.is_superuser %}
        <a href="{% url 'author-delete' pk=author.id %}">
            <button class="btn btn-danger btn-sm">DELETE AUTHOR</button>
        </a>
        <form action="{% url 'author-verification' author.pk %}">
            {% csrf_token %}
            {% if author.Verified %}
                <button type="submit" value="{{ author.pk }}"  class="btn btn-danger btn-sm">Undo verification</button>
            {% else %}
                <button type="submit" value="{{ author.pk }}"   class="btn btn-primary btn-sm">Verify</button>
            {% endif %}
        </form>
    {% endif %}
{% endblock %}
